# java-convenience-store-precourse
구매자의 할인 혜택과 재고 상황을 고려하여 최종 결제 금액을 계산하고 안내하는 결제 시스템을 구현한다.

## 기능 구현 목록

돈
- 더하기
- 할인하기
- 곱하기

물건 수량
- 수량 더하기
- 수량 빼기
- 수량 곱하기
- 수량을 특정 단위로 묶기

스토어 파일 리더
- 스토어 파일 읽어오기
  - 🚩 헤더 정보와 데이터 요소의 길이가 같지 않을 경우 예외가 발생한다.
  - 🚩 빈 파일은 헤더 정보가 없기 떄문에 예외가 발생한다.

상품 재고
- 재고 감소시키기
  - 🚩 재고 부족 시 예외가 발생한다.
  - 프로모션 재고가 부족할 때 일반 재고가 감소된다.
- 재고 차이 확인하기
  - 🚩 많은 재고에서 적은 재고의 차이를 확인하려 하면 예외가 발생한다.

상품
- 상품의 가격, 재고, 이름을 설정할 수 있다.
- 상품 구매
  - 🚩 0개 구매하려고 할 때 예외가 발생한다.
  - 상품에 프로모션이 있다면 적용한다.
  - 구매 후 구매 정보를 확인할 수 있어야 한다.
    - 상품명
    - 구매 가격
    - 결제할 수량
    - (프로모션 적용 시) 증정된 수량

프로모션 기간
- 현재 시간이 프로모션 기간인지 확인할 수 있다.
  - 🚩 종료 시간이 시작 시간보다 느리다면 예외가 발생한다.

프로모션
- 증정 수량 계산
  - 요청한 재고에 프로모션 재고가 없다면 수량을 0으로 반환한다.
  - 🚩 프로모션 무료 제공이 있다. 무료 제공 수량을 공지한다.
  - 🚩 몇 개는 프로모션이 적용되지만 몇 개는 정가구매 해야 한다. 정가구매 수량을 공지한다.
- 강제 증정 수량 계산
- 프로모션 이름 확인하기

멤버쉽
- 멤버쉽 할인
  - 프로모션 미적용 금액의 30% 할인한다.
  - 프로모션 적용 후 남은 금액에 할인을 적용한다.
  - 최대 한도는 8,000원이다.

영수증
- 구매정보를 추가할 수 있다.
- 영수증 정보를 확인할 수 있다.

상점
- 상점에서 판매중인 상품들을 알려준다.

## 잠재적 이슈

- 마지막으로 getter를 제거할 것

스토어 파일 리더
- [ ] 파일을 읽을 때 파일에 헤더가 필요하다는 규칙을 명시적으로 알려줄 수 없을까?

상품
- [x] 함께 붙어다니는 Stock을 묶을 클래스? -> 상품수량

상품수량
- [x] equals를 지원하면 테스트 코드 가독성이 올라갈 것 같다.
- [x] 불변객체로 만드는 것은 어떨까?
- [ ] 재고 감소로직의 가독성이 너무 별로다.


프로모션 기간
- [x] 프로모션 테스트 코드를 약간만 바꿔서 그대로 가져왔는데 없앨 방법이 있을까?
- [ ] start end의 Null을 확인해야 하나?

프로모션
- [ ] 프로모션 이름 길이에 제약을 두어야 할까?
- [ ] 프로모션 적용 과정이 매우 억지스럽다.
  - 결제 결과라는 것을 보내면 apply를 통해 할인된 결제결과를 반환하는 것은 어떨까?

## 개인적 목표
* 너무 많은 것을 한 번에 처리하지 말고 작은 단위로 처리하기.
* 시스템이 안정적이려면 어떤 테스트가 있어야 하는지 생각하고 작성한 뒤 구현하기.
* test-feat-refactor 커밋으로 TDD 사이클을 유지하기.
* 무분별한 Getter 사용 자제하기.
  * 한 번에 가지말고 public 필드로 시작해서 private으로 천천히 변환하는 과정을 거치기.
* 다른 개발자가 나의 코드를 사용할 때 오용 가능성을 염두하기.